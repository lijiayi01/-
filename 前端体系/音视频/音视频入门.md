## 音视频入门

### 封装格式

平时我们看到的视频文件的后缀名，如.flv .mp4 .avi .mkv .ts .rmvb等等，其实都是封装格式。<br>
我们知道视频是有视频文件和画面文件组成的。

**<font color="#ff502c">封装格式</font>**
其实就是将画面数据和音频数据打包成一个文件的规范。上面说的后缀名其实都是一种封装规范。

### 编码格式

上面说的"视频是有视频文件和画面文件组成的"严格意义上说应该是:

音频流压缩数据+视频流压缩数据 -> 封装格式的数据

而音频流压缩数据是由音频原始数据(非压缩数据)压缩编码而来，视频流压缩数据是由视频原始数据(非压缩数据)压缩编码而来。

所以说：

**<font color="#ff502c">编码格式</font>**
其实就是将原始数据压缩编码的一种规范。

视频常见的编码格式: H.264 MPEG2，VC-1

音频常见的编码格式: AAC，MP3，AC-3

### 原始数据

### 常见的播放器原理：

![播放器原理](./img/播放器原理.jpg)

<font color="#ff502c">解协议</font>: 

将流媒体媒体数据解析为相应的封装格式数据。音视频在网络上传播时，常采用各种流媒体协议，如http rtmp mms。

这些协议在传播音视频数据的同时，还传输一些信令数据。这些信令数据一般包括:对播放的控制 网络状态描述等等。

<font color="#ff502c">解协议过程中会去除信令数据，只保留音视频封装格式数据。</font>

比如： 采用rtmp协议的数据，经过解协议以后，输出flv格式的数据。

<font color="#ff502c">解封装： </font>

将封装格式的数据分离成音频流压缩编码数据和视频流压缩编码数据。

常见的封装格式: mp4,mkv,avi,flv,rmvb,ts等等。它的作用就是将压缩编码的音视频数据按照一定的格式放在一起。

比如: flv数据解封装后，输出 H.264编码的视频码流和aac编码的音频码流

<font color="#ff502c">解码:</font>

上面其实我们已经提到编码，解码其实就是它的逆向方法。

编码是把音视频原始数据压缩成指定编码格式的压缩数据。

那解码就是将压缩数据变成原始数据。


<font color="#ff502c">视音频同步:</font>

就是根据解封装模块处理过程中获取到的参数信息，同步解码出来的视频和音频数据，并将视频音频数据送至系统的显卡和声卡播放出来。(现在很多web端的播放器这一步通常是将音频数据留给audio播，视频文件canvas播放)






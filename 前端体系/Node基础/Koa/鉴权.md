# Koa鉴权

常用的3种鉴权方式:

- Session/Cookie鉴权
- token鉴权
- OAuth鉴权

## session/cookie鉴权

原理: 使用后端向前端设置set-cookie响应头向前端种下cookie，前端下次访问自动携带当前cookie作为用户标识，后盾通过请求头的cookie进行身份鉴别

**其实说白了，session使用的就是cookie的原理，只是这样叫习惯了**

原生Node示例代码：
```



````

使用Koa设置session代码：
可以使用koa-session包(可查看包的源码)
```


```

将session存入redis示例代码：

```


```


session/cookie方式的缺点：
- cookie只存在于浏览器中，但是在现代应用中，不光只有web，也有原生应用(ios android), 原生应用中并没有cookie的存在，所以无法鉴权

- 我们知道cookie的另外一个特点： 无法向不同域名传递，比如www.a.com中有一个cookie a=1，那么它无法向www.b.com传递。在我们现代服务器中，一般都是有多台服务器的，比如前端的静态资源服务器， api服务器等等，它们的域名是不同的，所以也无法传递cookie。

既然，我们知道了这种的方式的缺点，那么就请看下一代鉴权方式token鉴权，基本上现在的公司都是用的token的鉴权方式。


## token鉴权

jwt原理：

```


```

## OAuth鉴权


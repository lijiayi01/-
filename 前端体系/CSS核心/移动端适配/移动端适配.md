## 本文主要讲解移动端的常见概念

比如 物理像素 css像素 设备像素比 三个窗口等概念

### 1.物理像素

平时我们经常说的iphone6分辨率是750 * 1334， iphone5分辨率是640 * 1136

其实这里说的就是屏幕的水平像素和垂直像素，也就是我们的物理像素。

所以，提起物理像素，只要想起手机的分辨率即可。

### 2.设备独立像素

有的时候我们总会疑惑： 同样屏幕大小的手机，它的分辨率是不一样的。

比如：

iphoneXR的分辨率是: 828x1792
iphontXS_Max分辨率是：  1242x2688

但是它们的屏幕大小是相同的。

比如页面上我们写个div，它的宽度是300px,那对于iphoneXR会用600个物理像素去渲染，iphoneXS_Max会以900个物理像素去渲染。

我们可以简单的认为： 这个屏幕的宽 = 设备独立像素

因为这个屏幕宽是手机出厂就定死的宽度。

一般而言，iphone6的设备独立像素的375 * 667

这个数值我们应该都很清楚。

所以，提起设备独立像素，只要想起这个手机屏幕的宽高即可，是一个定死的值。

### 3.设备像素比(dpr)

公式： 设备像素比 = 物理像素 / 设备独立像素

iphone6: 750 / 375 = 2

iphone6sp 1242 / 414 = 3

这个就是我们平时几倍屏的问题。

js也有相关方法获取dpr: window.devicePixelRatio

### 4.css像素

在web开发中，我们用到的是单位是px，也就是css像素。

在正常情况下，缩放比例为100%情况下，1css像素 = 1 设备独立像素。

但是css像素是很容易被修改的，当页面放大的时候，1css像素就是占据更多的物理像素。

页面缩放系数 = CSS像素 / 设备独立像素


### 5.浏览器的3个视口

#### 1.布局视口

布局窗口：

在pc端，布局视口 = 当前浏览器的窗口大小

移动端：布局视口 约等于  980px, 这是手机厂商为了保证pc网页可以在移动端呈现。但是页面字体非常小，用户可以手动缩放扩大。(可以浏览器打开一个新的tab页，找到手机设备，移到html根元素上面，发现它的宽是980px)

js方法: 
```
document.documentElement.clientWidth / clientHeight
```

#### 2. 视觉视口

视觉视口：用户通过屏幕真实看到的区域。默认等于当前浏览器的窗口大小（包括滚动条宽度）。

当用户缩放时，会改变视觉视口

js方法：
```
window.innerWidth / innerHeight
```


#### 3.理想视口

理想视口：网页在移动端的理想大小，= 设备独立像素。(就是平时所说的iphone6 375px iphone6p 414px等等)，这个值不会改变。

上面我们提到：

页面的缩放比例 = css像素 / 设备独立像素

其实：

页面的缩放比例 = 理想视口宽度 / 视觉视口宽度

当缩放比例=1时， css像素 = 设备独立像素

理想视口宽度 = 视觉视口宽度

js方法:
```
screen.width / height
```

### 6.移动端的布局

在平时web开发中，在head区域，我们总会写这么一句:

```
<meta name="viewport" content="width=device-width; initial-scale=1; maximum-scale=1; minimum-scale=1; user-scalable=no;">
```
说一下具体参数的用处:

1. width=device-width: 定义<font color="#f00">布局视口</font>的宽度，device-width = 理想视口
2. initial-scale=1： 定义页面初始缩放比例
3. maximum-scale=1: 定义页面最大的缩放比例
4. minimum-scale=1： 定义页面最小的缩放比例
5. user-scalable=no：用户是否可以缩放：yes为可以，默认是yes，no为禁止

所以上面代码的意思：定义布局视口 = 理想视口，且用户不可缩放。

公式：

上面我们提到，页面的缩放比例 = 理想视口宽度 / 视觉视口宽度

在上面代码中，(以iphone6为例) 缩放比例1 = 375 / 视觉视口宽度

故 视觉视口宽度 = 理想视口宽度 = 布局视口宽度 = 375px

可以通过 document.document.clientWidth(布局视口宽度) window.innerWidth(视觉视口宽度) screen.width(理想视口宽度) 检测结论是否正确。


如果：我们写这样的meta属性呢，浏览器又是如何渲染的呢?
```
    <meta name="viewport" content="width=device-width; initial-scale=0.5; maximum-scale=0.5; minimum-scale=0.5; user-scalable=no;>
```
我们将默认缩放比例设置为0.5,会发生什么情况呢?

以iphone6为例：

查看 布局视口宽度(document.documentElement.clientWidth) : 750

视觉视口宽度(window.innerWidth) : 750

理想视口宽度(screen.width) : 375

发现： width=device-width，定义布局视口宽度 = 理想视口宽度的属性不起作用了。为什么呢?

其实，device-width并不是布局视口宽度的唯一决定性因素。

通过公式计算一下：

视觉视口宽度 = 理想视口宽度 / 缩放比例 = 375 / 0.5 = 750

**<font color="#f00">布局视口宽度会取理想视口宽度和视觉视口宽度最大值</font>**

故 视觉视口宽度 = 布局视口宽度 = 750


如果将默认缩放比例设置为2,会发生什么情况呢?

预期情况:(iphone6为例)

视觉视口宽度：375/2 

布局窗口宽度: 375

理想窗口宽度: 375

实际情况： 

视觉视口宽度：375/2 

布局窗口宽度: 310(chorme) 311(360浏览器)

理想窗口宽度: 375

发现： 布局窗口宽度并没有取两者的最大值,原因暂时还未知，可能是浏览器层面的优化。






